#include <stdio.h>
#include <atom.h>
#include <string.h>

//extern void process_input(FILE *fp);

int main(int argc, char *argv[])
{
        (void)argc;
        (void)argv;

        char buffer[512];

        while(fgets(buffer, sizeof(buffer), stdin)) {
                printf("\n\n");
                printf("line: %s\n", buffer);

                printf("length: %i\n", (int)strlen(buffer));
                int total_length = (int)strlen(buffer);

                int space_index = strchr(buffer, ' ') - buffer;
                printf("index of space: %i\n", space_index);

                char fingerprint[512];
                memcpy(fingerprint, &buffer[0], space_index);
                fingerprint[space_index] = '\0';

                char name[512];
                memcpy(name, &buffer[space_index+1], total_length-2);
                name[total_length-2] = '\0';

                printf("fingerprint: %s\n", fingerprint);
                printf("name: %sxxx\n", name);


                printf("\n\n");
        }

        if(ferror(stdin)) {
                fprintf(stderr, "Error reading stdin\n");
        }

        return 0;


/*        if(argc == 1) {
                printf("Attepting to read file from stdin\n");
                process_input(stdin);
        } else {
                for(int i = 1; i < argc; i++) {
                        printf("Attempting to read file %s...\n", argv[i]);

                        FILE *fp = fopen(argv[i], "r");

                        if(fp == NULL) {
                                fprintf(stderr,
                                        "Could not open file %s for reading\n",
                                        argv[i]);
                        } else {
                                //play_with_file(fp);
                                fclose(fp);
                        }
                }
        }*/
}

